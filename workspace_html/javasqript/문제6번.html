<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .todo{
            display:flex;
            justify-content: space-between;
        }
        .todo-wrap .todo[type=checkbox]:checked + span {
            text-decoration: line-through;
        }
        [type=checkbox]:not(#all){
            transform: scale(1.5);
        }
    </style>
    <script>
        window.addEventListener('load', function()
            {
                init();
                bind();
            })

        function init (){
            
            
            // document.querySelector('#add').addEventListener('click', function(){
            //     const todo = document.querySelector('#todo').value
            //     const wrap = document.querySelector('.todo-wrap')
            //     // wrap.innerText = todo
            //     //클릭하면 추가됨;
            
            //     const div = document.createElement('div')
            //     div.classList.add('todo')
            //     div.innerHTML = `
            //         <input type="checkbox">
            //         <span>${todo}</span>
            //         <input type="button" class="del" value="삭제">
            //         `
                      
                      
            //     div.querySelector('del').addEventListener('click', function(event){
            //               const isDel = confirm('삭제하시겠습니까')
            //               if(isDel){
            //                 event.target.parentNode.remove()
            //                 }
            //             })
            //             wrap.append(div);
            //             document.querySelector('#todo').value = ''
            //         })
            //     document.querySelector('#del_chk').addEventListener('click', function(){

            //     })
            document.querySelector('#add')
        .addEventListener('click', function(){
            const todo = document.querySelector('#todo').value
            const wrap = document.querySelector('.todo-wrap')
            
            const div = document.createElement('div')
            div.classList.add('todo')
            div.innerHTML = `
            <input type="checkbox">
            <span>${todo}</span>
            <input type="button" class="del" value="삭제">
            `
            div.querySelector('.del').addEventListener('click', function(event){
                

                // 이벤트가 발생한 DOM
                console.log('event.target')
                // 그부모
                console.log('event.target.parentNode')
                // 그부모 삭제
                const isDel = confirm('삭제하시겠습니까?')
                if(isDel){
                    event.target.parentNode.remove()
                }
            })
            
            wrap.append(div)

            // wrap.innerText = todo;

             // 입력창 비우기 (UX 개선용)
            document.querySelector('#todo').value = ''
            
            
            document.querySelector('#del_chk').addEventListener('click', function(){
                const chks = document.querySelectorAll('[type=checkbox]:not(#all):checked')
                // for( let i=0; i<chks.length; i++){
                //     chks[i].parentNode.remove()
                // }
                // chks.forEach(function(c){
                //     c.parentNode.remove()
                // })
                chks.forEach(c =>c.parentNode.remove())
                
            })
        })
            
        }







        function bind(){

        }


    </script>
</head>
<body>
     <div>
            <h1>할일 TODO</h1>
            <div>
                <input type="text" id="todo">
                <input type="button" id="add" value="추가">
            </div>
            <div>
                <input type="checkbox" id="all">전체선택
                <input type="button" id='del_chk' value="선택삭제">
            </div>
            <div class="todo-wrap">
                <!-- <div class="todo">
                    <input type="checkbox">
                    <span>할일1</span>
                    <input type="button" value="삭제">
                </div> -->
            </div>
        </div>

</body>
</html>